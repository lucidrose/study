<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.sample.service.impl.SampleMapper">

	<resultMap id="sample" type="egovframework.example.sample.service.SampleVO">
		<result property="memberNo" column="MEMBER_NO"/>
		<result property="memberKnm" column="MEMBER_KNM"/>
		<result property="memberEnm" column="MEMBER_ENM"/>
		<result property="memberJnm" column="MEMBER_JNM"/>
		<result property="rrn1" column="RRN1"/>
	</resultMap>

	<insert id="insertMember" parameterType="SampleVO">

			INSERT INTO TB_HR
				( 	MEMBER_NO
				  , MEMBER_KNM
				  , MEMBER_ENM
				  , MEMBER_JNM
				  , RRN1
				  , RRN2
				  , FILE_NM
				  , FILE_PATH
				  , B_YEAR
				  , B_MONTH
				  , B_DAY
				  , CALENDAR
				  , GENDER
				  , WEDDING
				  , CAREER
				  , MONEY_TYPE
				  , WORKING_TYPE
				  , JOIN_TYPE
				  , POST_CD
				  , ADDRESS
				  , PHONE_NO1
				  , PHONE_NO2
				  , PHONE_NO3
				  , EMAIL
				  , STAT
				  , ALCHOL
				  , LIST_STAT
				  , WORK_YDN
				   )
			VALUES ( (SELECT MAX(MEMBER_NO) + 1 FROM TB_HR)
				  , #{memberKnm, jdbcType=VARCHAR}
				  , #{memberEnm, jdbcType=VARCHAR}
				  , #{memberJnm, jdbcType=VARCHAR}
				  , #{rrn1, jdbcType=VARCHAR}
				  , #{rrn2, jdbcType=VARCHAR}
				  , #{fileNm, jdbcType=VARCHAR}
				  , #{filePath, jdbcType=VARCHAR}
				  , #{bYear, jdbcType=VARCHAR}
				  , #{bMonth, jdbcType=VARCHAR}
				  , #{bDay, jdbcType=VARCHAR}
				  , #{calendar, jdbcType=VARCHAR}
				  , #{gender, jdbcType=VARCHAR}
				  , #{wedding, jdbcType=VARCHAR}
				  , #{career, jdbcType=VARCHAR}
				  , #{moneyType, jdbcType=VARCHAR}
				  , #{workingType, jdbcType=VARCHAR}
				  , #{joinType, jdbcType=VARCHAR}
				  , #{postCd, jdbcType=VARCHAR}
				  , #{address, jdbcType=VARCHAR}
				  , #{phoneNo1, jdbcType=VARCHAR}
				  , #{phoneNo2, jdbcType=VARCHAR}
				  , #{phoneNo3, jdbcType=VARCHAR}
				  , #{email, jdbcType=VARCHAR}
				  , #{stat, jdbcType=VARCHAR}
				  , #{alchol, jdbcType=VARCHAR}
				  , #{listStat, jdbcType=VARCHAR}
				  , #{workYdn, jdbcType=VARCHAR} )

	</insert>

	<update id="updateSample">

			UPDATE TB_HR
			SET 
				<if test="memberKnm != null and memberKnm != ''">
			 	MEMBER_KNM = #{memberKnm ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="memberEnm != null and memberEnm != ''">
			 	, MEMBER_ENM = #{memberEnm ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="memberJnm != null and memberJnm != ''">
			 	, MEMBER_JNM = #{memberJnm ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="rrn1 != null and rrn1 != ''">
			 	, RRN1 = #{rrn1 ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="rrn2 != null and rrn2 != ''">
			 	, RRN2 = #{rrn2 ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="fileNm != null and fileNm != ''">
			 	, FILE_NM = #{fileNm ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="filePath != null and filePath != ''">
			 	, FILE_PATH = #{filePath ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="bYear != null and bYear != ''">
			 	, B_YEAR = #{bYear ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="bMonth != null and bMonth != ''">
			 	, B_MONTH = #{bMonth ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="bDay != null and bDay != ''">
			 	, B_DAY = #{bDay ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="calendar != null and calendar != ''">
			 	, CALENDAR = #{calendar ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="gender != null and gender != ''">
			 	, GENDER = #{gender ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="wedding != null and wedding != ''">
			 	, WEDDING = #{wedding ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="career != null and career != ''">
			 	, CAREER = #{career ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="moneyType != null and moneyType != ''">
			 	, MONEY_TYPE = #{moneyType ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="workingType != null and workingType != ''">
			 	, WORKING_TYPE = #{workingType ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="joinType != null and joinType != ''">
			 	, JOIN_TYPE = #{joinType ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="postCd != null and postCd != ''">
			 	, POST_CD = #{postCd ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="address != null and address != ''">
			 	, ADDRESS = #{address ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="phoneNo1 != null and phoneNo1 != ''">
			 	, PHONE_NO1 = #{phoneNo1 ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="phoneNo2 != null and phoneNo2 != ''">
			 	, PHONE_NO2 = #{phoneNo2 ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="phoneNo3 != null and phoneNo3 != ''">
			 	, PHONE_NO3 = #{phoneNo3 ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="email != null and email != ''">
			 	, EMAIL = #{email ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="stat != null and stat != ''">
			 	, STAT = #{stat ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="alchol != null and alchol != ''">
			 	, ALCHOL = #{alchol ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="listStat != null and listStat != ''">
			 	, LIST_STAT = #{listStat ,jdbcType=VARCHAR}
			 	</if>
			 	<if test="workYdn != null and workYdn != ''">
			 	, WORK_YDN = #{workYdn ,jdbcType=VARCHAR}
			 	</if>
			 	
			WHERE MEMBER_NO = #{memberNo ,jdbcType=INTEGER}

	</update>

	<delete id="deleteSample">

			DELETE FROM SAMPLE
			WHERE ID=#{id}

	</delete>

	<select id="selectMember" resultMap="sample">
			SELECT
				MEMBER_NO
				  , MEMBER_KNM
				  , MEMBER_ENM
				  , MEMBER_JNM
				  , RRN1
				  , RRN2
				  , FILE_NM
				  , FILE_PATH
				  , B_YEAR
				  , B_MONTH
				  , B_DAY
				  , CALENDAR
				  , GENDER
				  , WEDDING
				  , CAREER
				  , MONEY_TYPE
				  , WORKING_TYPE
				  , JOIN_TYPE
				  , POST_CD
				  , ADDRESS
				  , PHONE_NO1
				  , PHONE_NO2
				  , PHONE_NO3
				  , EMAIL
				  , STAT
				  , ALCHOL
				  , LIST_STAT
				  , WORK_YDN
			FROM TB_HR
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectMember" resultMap="sample">
			SELECT
				MEMBER_NO
				  , HIGH
				  , H_MAJOR
				  , H_YEAR
				  , H_MONTH
				  , COMPUTER
				  , C_MAJOR
				  , C_YEAR
				  , C_MONTH
				  , COLLEGE 
				  , CO_MAJOR
				  , CO_YEAR
				  , CO_MONTH
				  , UNIVERSITY
				  , U_MAJOR
				  , U_YEAR 
				  , U_MONTH
			FROM TB_GRAD
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectEdu" resultMap="sample">
			SELECT
				  MEMBER_NO
				, EDU_NM
				, EDU_START_DATE
				, EDU_END_DATE
				, EDU_AGENCY
			FROM TB_EDU
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectLicense" resultMap="sample">
			SELECT
				  MEMBER_NO
				, LICENSE_NM
				, L_DATE
			FROM TB_LICENSE
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectTech" resultMap="sample">
			SELECT
				  MEMBER_NO
				, TECH_NM
				, T_LEVEL
			FROM TB_TECH
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selecProject" resultMap="sample">
			SELECT
				  MEMBER_NO
				, PROJECT_NM
				, P_START_DATE
				, P_END_DATE
				, CLIENT
				, WORK_COMPANY
				, FIELD
				, PART
				, MODEL_NM
				, OS
				, LANGUAGE
				, DBMS
				, TOOL
				, SOCKET
				, REMARK
			FROM TB_TECH
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectCareer" resultMap="sample">
			SELECT
				  MEMBER_NO
				, COMPANY_NM
				, POSITION
				, START_DATE
				, END_DATE
				, TASK
			FROM TB_CAREER
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>
	
	<select id="selectWork" resultMap="sample">
			SELECT
				  MEMBER_NO
				, WORK_PROJECT_NM
				, PLACE
				, WORK_START_DATE
				, WORK_END_DATE
				, SALES_PRICE
				, SIGN_PRE_DATE
				, SIGN_DATE
				, CUSTOMER
			FROM TB_WORK
			WHERE MEMBER_NO=#{memberNo, jdbcType=VARCHAR}

	</select>

	<select id="selectSampleList" parameterType="searchVO" resultType="egovMap">

			SELECT
					MEMBER_NO
				  , MEMBER_KNM
				  , RRN1
				  , RRN2
				  , CASE WHEN GENDER = 1 THEN '남자' ELSE '여자'	END AS GENDER
				  , STAT
				  , LIST_STAT
				  , CASE WHEN WORK_YDN = 'Y' THEN '근무'
				  		 WHEN WORK_YDN = 'D' THEN '대기'
				  		 ELSE '퇴사' 
				    END AS WORK_YDN
			FROM TB_HR
			<!-- WHERE 1=1
			<if test="searchKeyword != null and searchKeyword != ''">
		        <choose>
		            <when test="searchCondition == 0">
						AND	ID LIKE '%' || #{searchKeyword} || '%'
					</when>
		            <when test="searchCondition == 1">
						AND	NAME LIKE '%' || #{searchKeyword} || '%'
					</when>
				</choose>
			</if>
			ORDER BY ID ASC
			LIMIT #{recordCountPerPage} OFFSET #{firstIndex} -->
	</select>

	<select id="selectSampleListTotCnt" parameterType="searchVO" resultType="int">

			SELECT COUNT(*) totcnt
			FROM TB_HR
			WHERE 1=1
			<!-- <if test="searchKeyword != null and searchKeyword != ''">
		        <choose>
		            <when test="searchCondition == 0">
						AND ID LIKE '%' || #{searchKeyword} || '%'
					</when>
		            <when test="searchCondition == 1">
						AND	NAME LIKE '%' || #{searchKeyword} || '%'
					</when>
				</choose>
			</if> -->
	</select>

</mapper>